# Bitcoin Database - –§–æ—Ä–º–∞—Ç –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

## üìä –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ë–î

**–§–∞–π–ª**: `btc-20200101-to-20250201.db`

**–§–æ—Ä–º–∞—Ç**: seedrecover hash table
**–†–∞–∑–º–µ—Ä**: 8.0 GB
**–ê–¥—Ä–µ—Å–æ–≤**: 750,459,113 (750 –º–∏–ª–ª–∏–æ–Ω–æ–≤)

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –ó–ê–ì–û–õ–û–í–û–ö (64 KB = 0x10000 –±–∞–π—Ç)                   ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ –°–æ–¥–µ—Ä–∂–∏—Ç:                                           ‚îÇ
‚îÇ ‚Ä¢ "seedrecover address database\r\n"                ‚îÇ
‚îÇ ‚Ä¢ JSON –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ:                                  ‚îÇ
‚îÇ   - _dbLength: 1,073,741,824 (—Å–ª–æ—Ç–æ–≤ –≤ —Ç–∞–±–ª–∏—Ü–µ)     ‚îÇ
‚îÇ   - _table_bytes: 8,589,934,592 (8 GB)              ‚îÇ
‚îÇ   - _bytes_per_addr: 8 (–ø–µ—Ä–≤—ã–µ 8 –±–∞–π—Ç hash160)     ‚îÇ
‚îÇ   - _len: 750,459,113 (—Ä–µ–∞–ª—å–Ω—ã—Ö –∞–¥—Ä–µ—Å–æ–≤)            ‚îÇ
‚îÇ   - _hash_mask: 1,073,741,823                       ‚îÇ
‚îÇ   - _hash_bytes: 4                                  ‚îÇ
‚îÇ   - version: 1                                      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                       ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ HASH TABLE (8 GB)                                   ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ –§–æ—Ä–º–∞—Ç: Open addressing (linear probing)           ‚îÇ
‚îÇ                                                     ‚îÇ
‚îÇ –ö–∞–∂–¥–∞—è –∑–∞–ø–∏—Å—å: 8 –±–∞–π—Ç                              ‚îÇ
‚îÇ   - –ü–µ—Ä–≤—ã–µ 8 –±–∞–π—Ç –∏–∑ hash160 (20 –±–∞–π—Ç)             ‚îÇ
‚îÇ   - 0x00000000 00000000 = –ø—É—Å—Ç–æ–π —Å–ª–æ—Ç               ‚îÇ
‚îÇ                                                     ‚îÇ
‚îÇ –°–ª–æ—Ç–æ–≤: 1,073,741,824 (2^30)                       ‚îÇ
‚îÇ –ó–∞–ø–æ–ª–Ω–µ–Ω–æ: 750,459,113 (~70%)                      ‚îÇ
‚îÇ                                                     ‚îÇ
‚îÇ Hash —Ñ—É–Ω–∫—Ü–∏—è:                                       ‚îÇ
‚îÇ   index = (first_4_bytes & hash_mask) % dbLength   ‚îÇ
‚îÇ                                                     ‚îÇ
‚îÇ –ö–æ–ª–ª–∏–∑–∏–∏: linear probing (+1, +2, +3...)           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üîç –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç lookup:

### –ê–ª–≥–æ—Ä–∏—Ç–º –ø–æ–∏—Å–∫–∞:

1. **–í—Ö–æ–¥**: hash160 (20 –±–∞–π—Ç) = RIPEMD160(SHA256(pubkey))

2. **–í—ã—á–∏—Å–ª–µ–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–∞**:
   ```rust
   let hash_value = u32::from_le_bytes([hash160[0..4]]);
   let index = (hash_value & hash_mask) % db_length;
   ```

3. **–ü–æ–∏—Å–∫ —Å linear probing**:
   ```rust
   loop {
       let record = read_8_bytes_at(index);

       if record == [0x00; 8] {
           return false;  // –ü—É—Å—Ç–æ–π —Å–ª–æ—Ç ‚Üí –Ω–µ –Ω–∞–π–¥–µ–Ω–æ
       }

       if record == hash160[0..8] {
           return true;  // –ù–∞–π–¥–µ–Ω–æ!
       }

       index = (index + 1) % db_length;  // –ö–æ–ª–ª–∏–∑–∏—è ‚Üí —Å–ª–µ–¥—É—é—â–∏–π
   }
   ```

4. **–ú–∞–∫—Å–∏–º—É–º –ø—Ä–æ–≤–µ—Ä–æ–∫**: 100 (—á—Ç–æ–±—ã –Ω–µ –∑–∞–≤–∏—Å–Ω—É—Ç—å)

### –ü—Ä–∏–º–µ—Ä:

```
hash160 = [0xd0, 0x49, 0x89, 0xa0, ..., 0xff] (20 –±–∞–π—Ç)

–®–∞–≥ 1: –ë–µ—Ä—ë–º –ø–µ—Ä–≤—ã–µ 4 –±–∞–π—Ç–∞: 0xd04989a0
–®–∞–≥ 2: index = (0xd04989a0 & 0x3FFFFFFF) % 1073741824
–®–∞–≥ 3: –ß–∏—Ç–∞–µ–º offset = 0x10000 + (index * 8)
–®–∞–≥ 4: –°—Ä–∞–≤–Ω–∏–≤–∞–µ–º –ø–µ—Ä–≤—ã–µ 8 –±–∞–π—Ç hash160 —Å –∑–∞–ø–∏—Å—å—é
```

## üíæ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–¥–µ:

### db_loader.rs:

```rust
use db_loader::Database;

// –ó–∞–≥—Ä—É–∑–∫–∞ –ë–î
let mut db = Database::load("btc-20200101-to-20250201.db")?;

// –ü–æ–∏—Å–∫ –∞–¥—Ä–µ—Å–∞
let hash160: [u8; 20] = [...];  // RIPEMD160(SHA256(pubkey))
let found = db.lookup_bitcoin_address(&hash160);

if found {
    println!("–ê–¥—Ä–µ—Å –Ω–∞–π–¥–µ–Ω –≤ –ë–î!");
}
```

### –û—Ç–∫—É–¥–∞ –±–µ—Ä—ë—Ç—Å—è hash160?

```
Bitcoin –∞–¥—Ä–µ—Å = Base58Check(version + hash160 + checksum)

–ì–¥–µ:
  hash160 = RIPEMD160(SHA256(pubkey))
  pubkey = 33 –±–∞–π—Ç–∞ (compressed) –∏–ª–∏ 65 –±–∞–π—Ç (uncompressed)
```

**–í GPU kernel** (OpenCL):

```c
// 1. –ü–æ–ª—É—á–∞–µ–º –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á
extended_public_key_t pub;
public_from_private(&address_key, &pub);

// 2. –í—ã—á–∏—Å–ª—è–µ–º hash160
uchar pubkey_hash[20];
identifier_for_public_key(&pub, pubkey_hash);
// identifier_for_public_key –¥–µ–ª–∞–µ—Ç SHA256 + RIPEMD160

// 3. –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤ –ë–î (–Ω–∞ CPU —Å—Ç–æ—Ä–æ–Ω–µ)
if db.lookup_bitcoin_address(&pubkey_hash) {
    // –ù–∞–π–¥–µ–Ω–æ!
}
```

## üéØ –ö–∞–∫–∏–µ –∞–¥—Ä–µ—Å–∞ –≤ –ë–î?

–ë–î —Å–æ–¥–µ—Ä–∂–∏—Ç **750 –º–∏–ª–ª–∏–æ–Ω–æ–≤ Bitcoin –∞–¥—Ä–µ—Å–æ–≤ —Å –±–∞–ª–∞–Ω—Å–æ–º** (2020-2025):

- ‚úÖ P2PKH (Legacy, `1...`)
- ‚úÖ P2SH (SegWit, `3...`)
- ‚úÖ P2WPKH (Native SegWit, `bc1...`)
- ‚úÖ P2WSH, P2TR (Taproot)

**–í—Å–µ —Ç–∏–ø—ã –∞–¥—Ä–µ—Å–æ–≤ —Ö—Ä–∞–Ω—è—Ç—Å—è –∫–∞–∫ hash160** (–ø–µ—Ä–≤—ã–µ 8 –±–∞–π—Ç).

## üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:

```
–í—Å–µ–≥–æ —Å–ª–æ—Ç–æ–≤:     1,073,741,824 (1 –º–ª—Ä–¥)
–ó–∞–ø–æ–ª–Ω–µ–Ω–æ:          750,459,113 (750 –º–ª–Ω)
Load factor:                70%
–†–∞–∑–º–µ—Ä:                   8.0 GB
–†–∞–∑–º–µ—Ä –≤ RAM:              –Ω–µ—Ç (—á–∏—Ç–∞–µ—Ç—Å—è —Å –¥–∏—Å–∫–∞)
```

## ‚ö° –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:

**–û–¥–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞**:
- –õ—É—á—à–∏–π —Å–ª—É—á–∞–π (–Ω–µ—Ç –∫–æ–ª–ª–∏–∑–∏–π): 1 —á—Ç–µ–Ω–∏–µ —Å –¥–∏—Å–∫–∞ (~0.001 –º—Å –Ω–∞ SSD)
- –°—Ä–µ–¥–Ω–∏–π —Å–ª—É—á–∞–π (1-2 –∫–æ–ª–ª–∏–∑–∏–∏): 2-3 —á—Ç–µ–Ω–∏—è (~0.003 –º—Å)
- –•—É–¥—à–∏–π —Å–ª—É—á–∞–π (–º–∞–∫—Å 100 –ø—Ä–æ–≤–µ—Ä–æ–∫): ~0.1 –º—Å

**Batch –ø—Ä–æ–≤–µ—Ä–∫–∞** (GPU –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç 5M –∞–¥—Ä–µ—Å–æ–≤):
- 5M –ø—Ä–æ–≤–µ—Ä–æ–∫ √ó 0.003 –º—Å = 15 —Å–µ–∫—É–Ω–¥
- –ù–æ GPU –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∑–∞–Ω–∏–º–∞–µ—Ç ~25 —Å–µ–∫—É–Ω–¥
- ‚Üí DB lookup –ù–ï —É–∑–∫–æ–µ –º–µ—Å—Ç–æ!

## üîß –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:

### 1. –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ (–µ—Å–ª–∏ –µ—Å—Ç—å RAM):

```rust
use std::collections::HashMap;

let mut cache = HashMap::new();

fn lookup_cached(&mut self, hash160: &[u8]) -> bool {
    if let Some(&result) = cache.get(hash160) {
        return result;
    }

    let result = self.lookup_bitcoin_address(hash160);
    cache.insert(hash160.to_vec(), result);
    result
}
```

### 2. Batch –ø—Ä–æ–≤–µ—Ä–∫–∞ (1 seek –≤–º–µ—Å—Ç–æ N):

```rust
// –í–º–µ—Å—Ç–æ N –æ—Ç–¥–µ–ª—å–Ω—ã—Ö lookup, —Å–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ –∏–Ω–¥–µ–∫—Å—É
// –∏ —á–∏—Ç–∞–µ–º –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ
```

### 3. Mmap (memory-mapped file):

```rust
use memmap2::Mmap;

// –ú–∞–ø–ø–∏–º —Ñ–∞–π–ª –≤ –ø–∞–º—è—Ç—å - OS —Å–∞–º –¥–µ–ª–∞–µ—Ç –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
let mmap = unsafe { Mmap::map(&file)? };
```

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è:

1. **–ë–î —Ç–æ–ª—å–∫–æ –¥–ª—è —á—Ç–µ–Ω–∏—è** - –Ω–µ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–µ–º
2. **–ù–µ thread-safe** - –∫–∞–∂–¥–æ–º—É –ø–æ—Ç–æ–∫—É –Ω—É–∂–µ–Ω —Å–≤–æ–π `File` handle
3. **False positives –≤–æ–∑–º–æ–∂–Ω—ã** (—Ö—Ä–∞–Ω—è—Ç—Å—è —Ç–æ–ª—å–∫–æ 8 –∏–∑ 20 –±–∞–π—Ç)
   - –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å: 1 / 2^64 ‚âà 0 (–∫—Ä–∞–π–Ω–µ –º–∞–ª–∞)
4. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ CPU** - –ë–î –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤ GPU

## üéØ –ò—Ç–æ–≥–æ:

–≠—Ç–æ—Ç —Ñ–æ—Ä–º–∞—Ç –ë–î –∏–¥–µ–∞–ª–µ–Ω –¥–ª—è –≤–∞—à–µ–π –∑–∞–¥–∞—á–∏:
- ‚úÖ –ö–æ–º–ø–∞–∫—Ç–Ω—ã–π (8 –±–∞–π—Ç –Ω–∞ –∞–¥—Ä–µ—Å)
- ‚úÖ –ë—ã—Å—Ç—Ä—ã–π lookup (O(1) –≤ —Å—Ä–µ–¥–Ω–µ–º)
- ‚úÖ –ù–µ —Ç—Ä–µ–±—É–µ—Ç –∑–∞–≥—Ä—É–∑–∫–∏ –≤ RAM
- ‚úÖ 750 –º–∏–ª–ª–∏–æ–Ω–æ–≤ –∞–¥—Ä–µ—Å–æ–≤
- ‚úÖ –°–æ–≤–º–µ—Å—Ç–∏–º —Å seedrecover

---

**–ì–æ—Ç–æ–≤–æ!** db_loader.rs –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —ç—Ç—É –ë–î. üéâ
